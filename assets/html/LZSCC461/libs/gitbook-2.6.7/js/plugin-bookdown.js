gitbook.require(["gitbook","lodash","jQuery"],(function(o,t,e){var n=o.storage;o.events.bind("start",(function(t,l){var a=l.edit;a&&a.link&&o.toolbar.createButton({icon:"fa fa-edit",label:a.text||"Edit",position:"left",onClick:function(o){o.preventDefault(),window.open(a.link)}});var c=l.history;c&&c.link&&o.toolbar.createButton({icon:"fa fa-history",label:c.text||"History",position:"left",onClick:function(o){o.preventDefault(),window.open(c.link)}});var s=l.view;s&&s.link&&o.toolbar.createButton({icon:"fa fa-eye",label:s.text||"View Source",position:"left",onClick:function(o){o.preventDefault(),window.open(s.link)}});var d=l.download;(d=function(){if(d&&d instanceof Array&&0!==d.length)return d[0]instanceof Array?d:e.map(d,(function(o){return[[o,o.replace(/.*[.]/g,"").toUpperCase()]]}))}(d))&&(1===d.length&&/[.]pdf$/.test(d[0][0])?o.toolbar.createButton({icon:"fa fa-file-pdf-o",label:d[0][1],position:"left",onClick:function(o){o.preventDefault(),window.open(d[0][0])}}):o.toolbar.createButton({icon:"fa fa-download",label:"Download",position:"left",dropdown:e.map(d,(function(o){return{text:o[1],onClick:function(t){t.preventDefault(),window.open(o[0])}}}))}));var f=["Keyboard shortcuts (<> indicates arrow keys):","<left>/<right>: navigate to previous/next page","s: Toggle sidebar"];!1!==l.search&&f.push("f: Toggle search input (use <up>/<down>/Enter in the search input to navigate through search matches; press Esc to cancel search)"),!1!==l.info&&o.toolbar.createButton({icon:"fa fa-info",label:"Information about the toolbar",position:"left",onClick:function(o){o.preventDefault(),window.alert(f.join("\n\n"))}});var u=window.location.pathname;u=u.substr(u.lastIndexOf("/")+1),""===(u=decodeURIComponent(u))&&(u="index.html");var h=e('a[href^="'+u+location.hash+'"]').parent("li.chapter").first(),p=e("ul.summary"),v=p.find("li.chapter");0===h.length&&(h=v.first()),h.addClass("active"),v.on("click",(function(){v.removeClass("active"),e(this).addClass("active"),n.set("tocScrollTop",p.scrollTop())}));var b=l.toc;b&&b.collapse&&function(){var o=b.collapse;if("none"!==o&&("section"===o||"subsection"===o)){var t=p.children("li[data-level]").children("ul");"section"===o?t.hide().parent().has(h).children("ul").show():t.children("li").children("ul").hide().parent().has(h).children("ul").show(),h.children("ul").show();var n=t.children("li");"section"===o&&n.children("ul").hide(),p.children("li[data-level]").find("a").on("click.bookdown",(function(){u===e(this).attr("href").replace(/#.*/,"")&&e(this).parent("li").children("ul").toggle()}))}}(),e("a").each((function(o,t){t.offsetWidth>=t.scrollWidth||void 0!==t.title&&(t.title=t.text)}));var g=n.get("tocScrollTop");void 0!==g&&p.scrollTop(g),b&&!1!==b.scroll_highlight&&h.length>0&&function(){var o=e(window).height(),t=h[0].getBoundingClientRect();(t.top>=o||t.top<=0||t.bottom<=0)&&p.scrollTop(h[0].offsetTop);var n=e('a[href^="'+u+'"]').parent("li.chapter"),l=n.length;if(0===l&&(n=p.find("li.chapter"),l=n.length),0!==l){var a=r.find(".page-inner").find("h1,h2,h3"),c=a.length,s=a.map((function(o,t){return e(t).text()}));if(0!==c){var d=function(){var o=e(window).height();clearTimeout(e.data(this,"scrollTimer")),e.data(this,"scrollTimer",setTimeout((function(){for(var t=0;t<c;t++){var e=a[t].getBoundingClientRect();if(e.top>=0&&e.bottom<=o)break}if(t!==c){n.removeClass("active");for(var i=0;i<l&&n.eq(i).children("a").first().text()!==s[t];i++);for(i===l&&(i=0);i>0&&n.eq(i).is(":hidden");)i--;n.eq(i).addClass("active")}}),250))};r.on("scroll.bookdown",d),i.on("scroll.bookdown",d)}}}(),e('a[href="'+u+'"]').parent("li.chapter").children("a").on("click",(function(){return r.scrollTop(0),i.scrollTop(0),!1}));var w=l.toolbar;if(!w||"static"!==w.position){var k=e(".book-header");i.addClass("fixed"),k.addClass("fixed").css("background-color",i.css("background-color")).on("click.bookdown",(function(){k.css("background-color",i.css("background-color"))}))}})),o.events.bind("page.change",(function(){var o=e("ul.summary");n.set("tocScrollTop",o.scrollTop())}));var i=e(".book-body"),r=i.find(".body-inner"),l=function(){return r.find(".page-inner").find("h1,h2").first().text()},a=function(){n.set("bodyScrollTop",{body:i.scrollTop(),inner:r.scrollTop(),focused:document.hasFocus(),title:l()})};e(document).on("servr:reload",a);var c=function(){var o=!0;try{o=window.self!==window.top}catch(o){}return o};c()&&e(window).on("blur unload",a),e((function(){var o=n.get("bodyScrollTop");o&&o.title===l()&&(0!==o.body&&i.scrollTop(o.body),0!==o.inner&&r.scrollTop(o.inner)),(o&&o.focused||!c())&&r.find(".page-wrapper").focus(),n.remove("bodyScrollTop")}))}));